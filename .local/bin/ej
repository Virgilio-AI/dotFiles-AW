#!/usr/bin/zsh

if [[ "$1" == *.sync.py ]] ; then
	echo "warnig you choosed the python file"
	exit
fi

if [[ "$1" == *.sync.ipynb ]] ; then
	echo "heey"
	if [ ! -f "$1" ] ; then
		python $HOME/.local/bin/create-notebook.py $1
	fi
	jupytext $1 --to py:percent ;
	jupyter-notebook $1 &
	st -e sh -c "nvim $1:r.py" &

elif [[ "$1" == *.ipynb ]] ; then
	echo "segundo"
	name=$( basename $1 .ipynb )
	if [ ! -f "$1" ] ; then
		python $HOME/.local/bin/create-notebook.py $name.ipynb
	else
		mv $1 $name.sync.ipynb
	fi
	jupytext $name.sync.ipynb --to py:percent ;
	jupyter-notebook $name.sync.ipynb &
	st -e sh -c "nvim $name.sync.py" &

else
	echo "tercero"
	if [ ! -f "$1.sync.ipynb" ] ; then
		python $HOME/.local/bin/create-notebook.py $1.sync.ipynb
	fi
	jupytext $1.sync.ipynb --to py:percent ;
	jupyter-notebook $1.sync.ipynb &
	st -e sh -c "nvim $1.sync.py" &
fi
